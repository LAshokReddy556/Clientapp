<div class="paddedbottom10">
    <div class="paddedbottom10">
        <ul class="breadcrumb">
            <li><a href="#/system">{{'link.admin.system' | translate}}</a> <span class="divider">/</span></li>
            <li class="active">{{'label.manageschedulerjobs' | translate}}</li>
        </ul>
</div>
</div>
<div class="row-fluid" ng-controller="SchedulerJobsController">
    <table>
        <tr>
            <td><h3>{{'label.schedulerstatus' | translate}}&nbsp;:&nbsp;{{schedulerstatus}}</h3></td>
            <td></td>
            <td><button class="btn" ng-show="schedulerstatus=='Active'" ng-click="suspendJobs()">Suspend</button></td>
            <td><button class="btn" ng-show="schedulerstatus=='Standby'" ng-click="activeJobs()">Active</button></td>
        </tr>
    </table>
    <table ng-show="sentForExecution">
        <h4 ng-show="sentForExecution">Jobs Sent for execution</h4>
        <tr ng-repeat="jobexecution in sentForExecution">
            <td><i class="icon-check icon-white"></i>{{jobexecution}}</td>
        </tr>
    </table>
	<table class="table">
        <thead>
            <tr class="graybg">
                <th><input type="checkbox" ng-model="activeall" ng-true-value="true" ng-false-value="false"
                     ng-click="selectAll(activeall)">{{'label.selectall' | translate}}</th>
                <th>{{'table.heading.name' | translate}}</th>
                <th>{{'table.heading.status' | translate}}</th>
                 <th>{{'table.heading.active' | translate}}</th>
                <th>{{'table.heading.nextrun' | translate}}</th>
                <th>{{'table.heading.previousrun' | translate}}</th>
                <th>{{'table.heading.previousrunstatus' | translate}}</th>
                <th>{{'table.heading.currentstatus' | translate}}</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="job in jobs">
                <td><input type="checkbox" ng-model="active" ng-true-value="true" ng-false-value="false"
                     ng-click="runJobSelected(job, active)"></td>
                <td><a href="#/viewschedulerjob/{{job.jobId}}">{{job.displayName}}</a></td>
                <td>{{job.active}}</td>
                <td><input type="checkbox" class="changeStatus" ng-model="job.active" id="changeStatus" ng-click="selectAll(job)"/></td>
                <td>{{job.nextRunTime | DateFormat}}</td>
                <td>{{job.lastRunHistory.jobRunStartTime | DateFormat}}</td>
                <td>{{job.lastRunHistory.jobRunStartTime| DateFormat}}</td>
                <td>{{job.currentlyRunning}}</td>
            </tr>
        </tbody>
    </table>
    <div class="offset3">
      <button class="btn btn-primary" ng-click="runSelectedJobs()">Run Selected Jobs</button>
      <button class="btn btn-primary" ng-click="refresh()">Refresh</button>
    </div>
 <script type="text/ng-template" id="approve1.html">
                    <div class="modal-header silver">
                        <h3 class="bolder">{{'dialog.invoice.title.message' | translate}}</h3>
                    </div>
                    <div class="modal-body modal-big" style="height:270px;">
                       	<div class="control-group">
							<div class="controls">
						 	 <label class="control-label" style="color:red;" ng-show="error.length>0">{{error | translate}}</label>
							</div>	
						</div>
						 <div class="control-group">
                           <label class="control-label">{{'label.job.reportname' | translate }}<span class="required">*</span></label>
                           <div class="controls">
                           <select ng-model="formData.reportName"  ng-options="reportData.batchName as reportData.batchName for reportData in reportDatas" value="{{office.id}}" >
                           </select>
                        </div>
 <div class="control-group">
                <label class="control-label">{{ 'label.job.messagetemplate' | translate }}<span class="required">*</span></label>
                <div class="controls">
                  <select ng-model="formData.messageTempalate"  ng-options="billingMessageData.templateDescription as billingMessageData.templateDescription for billingMessageData in billingMessageDatas" value="{{office.id}}">
                </select>
                </div>
              </div>
                      </div>
                   
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-warning" ng-click="reject()">{{'button.cancel' | translate}}</button>
                        <button class="btn btn-primary" ng-click="accept(start.date)">{{'label.confirm' | translate}}</button>
                    </div>
      </script>
</div>